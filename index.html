<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å•è¯æ‹¼å†™æ¸¸æˆV3.3 - æŒ‰è¯¾æ—¶å­¦ä¹ </title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#3B82F6',
            secondary: '#10B981',
            accent: '#F59E0B',
            danger: '#EF4444',
            neutral: '#6B7280',
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
          animation: {
            'pop': 'pop 0.3s ease',
            'streak': 'streak 1s forwards',
            'fade-in': 'fadeIn 0.5s ease',
            'slide-up': 'slideUp 0.5s ease-out',
            'highlight': 'highlight 1s ease',
          },
          keyframes: {
            pop: {
              '0%, 100%': { transform: 'scale(1)' },
              '50%': { transform: 'scale(1.1)' },
            },
            streak: {
              '0%': { opacity: '0', transform: 'translate(-50%, -20px)' },
              '50%': { opacity: '1', transform: 'translate(-50%, 0)' },
              '100%': { opacity: '0', transform: 'translate(-50%, 20px)' },
            },
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            },
            highlight: {
              '0%, 100%': { background: '#EF4444' },
              '50%': { background: '#f87171' },
            }
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .word-input {
        @apply w-12 h-12 sm:w-10 sm:h-10 rounded-md border-2 border-gray-300 text-center text-xl font-medium transition-all duration-300;
        text-transform: lowercase;
      }
      .word-input::placeholder {
        text-transform: none;
      }
      .word-input:focus {
        @apply border-primary ring-2 ring-primary/30;
      }
      .word-input.correct {
        @apply border-secondary bg-green-50 animate-pop;
      }
      .word-input.wrong {
        @apply border-danger bg-red-50;
      }
      .fixed-letter {
        @apply w-12 h-12 sm:w-10 sm:h-10 rounded-md border-2 border-gray-300 bg-gray-100 text-gray-600 text-center text-xl font-medium flex items-center justify-center cursor-not-allowed;
      }
      .game-btn {
        @apply px-4 py-3 sm:px-5 sm:py-2.5 rounded-lg font-medium transition-all duration-300 hover:translate-y-[-2px] hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2;
      }
      .streak-effect {
        @apply fixed top-1/4 left-1/2 transform -translate-x-1/2 text-4xl font-bold text-accent opacity-0 pointer-events-none animate-streak;
      }
      .progress-bar {
        @apply h-2 rounded-full overflow-hidden bg-gray-200;
      }
      .progress-fill {
        @apply h-full transition-all duration-500 ease-out;
      }
      .level-badge {
        @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800;
      }
      .reward-card {
        @apply bg-gradient-to-br from-yellow-100 to-orange-100 rounded-xl p-4 border border-yellow-200 shadow-lg transition-all duration-500 animate-fade-in;
      }
      .listening {
        background-color: #ef4444 !important;
      }
      #similarityMeter {
        transition: all 0.3s ease;
      }
      .word-input.highlight {
        animation: highlight 1s ease;
      }
      .btn-group {
        @apply grid grid-cols-2 gap-2 sm:flex sm:gap-2;
      }
      .btn-group .game-btn {
        @apply flex-1 justify-center;
      }
      .selector-container {
        @apply grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4;
      }
      .form-selector {
        @apply flex flex-col space-y-1;
      }
      .select-wrapper {
        @apply relative;
      }
      .select-wrapper::after {
        content: "â–¼";
        @apply absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none;
      }
      .custom-select {
        @apply w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-white appearance-none focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all;
      }
      .stats-badge {
        @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800;
      }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen font-sans">
  <div class="max-w-3xl mx-auto px-4 py-6 sm:py-8">
    <div class="text-center mb-6 sm:mb-8 animate-fade-in">
      <h1 class="text-[clamp(1.8rem,5vw,3rem)] font-bold text-gray-800 mb-2">
        <i class="fa fa-book text-primary mr-2"></i>å•è¯æ‹¼å†™æ¸¸æˆ
      </h1>
      <p class="text-gray-600 text-base sm:text-lg">æå‡ä½ çš„è‹±è¯­è¯æ±‡é‡ï¼</p>
    </div>

    <div class="bg-white rounded-xl p-5 sm:p-6 shadow-lg mb-6 animate-fade-in">
      <div class="mb-5 pb-4 border-b border-gray-100">
        <div class="selector-container">
          <div class="form-selector">
            <label class="block text-sm font-medium text-gray-700">é€‰æ‹©å•è¯æ–‡ä»¶ï¼š</label>
            <div class="select-wrapper">
              <select id="wordFileSelect" class="custom-select">
                <option value="default">é»˜è®¤å•è¯åº“</option>
                <option value="two">äºŒå¹´çº§å•è¯</option>
                <option value="threesh">ä¸‰å¹´çº§ä¸Šå•è¯</option>
                <option value="basic">æ–°æ¦‚å¿µ1è¯åº“</option>
              </select>
            </div>
          </div>
          
          <div class="form-selector">
            <label class="block text-sm font-medium text-gray-700">é€‰æ‹©è¯¾æ—¶ï¼š</label>
            <div class="select-wrapper">
              <select id="lessonSelect" class="custom-select">
                <option value="">è¯·å…ˆé€‰æ‹©å•è¯åº“</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="flex flex-wrap gap-2 mb-2">
          <div id="lessonStats" class="flex-1 flex items-center justify-center sm:justify-end text-sm text-gray-600">
            <span id="statsInfo" class="hidden sm:inline-flex items-center">
              <i class="fa fa-book text-primary mr-1"></i>
              <span>æ€»è¯¾æ—¶ï¼š--</span>
              <span class="mx-2">|</span>
              <span>æ€»å•è¯ï¼š--</span>
            </span>
          </div>
        </div>
        
        <div id="fileNotification" class="mt-1 text-sm text-gray-600"></div>
      </div>

      <div id="content" class="space-y-5">
        <div class="animate-slide-up">
          <div id="instruction" class="text-lg font-semibold text-gray-800 mb-1"></div>
          <div id="stats" class="flex flex-wrap gap-2 text-sm text-gray-600"></div>
        </div>

        <div class="bg-blue-50 rounded-lg p-4 mb-5 animate-slide-up" style="animation-delay: 0.1s">
          <div id="question" class="text-base font-medium text-gray-800 mb-2"></div>
          <div id="definition" class="text-lg text-primary font-medium mb-1"></div>
          <div id="phonetic" class="text-base text-indigo-500 italic"></div>
        </div>

        <div class="flex justify-center mb-5 animate-slide-up" style="animation-delay: 0.2s">
          <div id="letterBox" class="flex gap-2 flex-wrap justify-center"></div>
        </div>

        <div class="mb-5 animate-slide-up" style="animation-delay: 0.3s">
          <div class="btn-group mb-2">
            <button onclick="prevQuestion()" id="prevBtn" class="game-btn bg-gray-200 text-gray-700 focus:ring-gray-400">
              <i class="fa fa-arrow-left mr-1"></i> ä¸Šä¸€é¢˜
            </button>
            <button onclick="toggleListening()" id="startReadingBtn" class="game-btn bg-orange-500 text-white focus:ring-orange-500">
              <i class="fa fa-microphone mr-1"></i> å¼€å§‹æœ—è¯»
            </button>
          </div>
          <div class="btn-group">
            <button onclick="readWord()" class="game-btn bg-primary text-white focus:ring-primary">
              <i class="fa fa-volume-up mr-1"></i> å¬å•è¯
            </button>
            <button onclick="showMistakes()" class="game-btn bg-green-500 text-white focus:ring-green-500">
              <i class="fa fa-book mr-1"></i> æŸ¥çœ‹é”™é¢˜æœ¬
            </button>
          </div>
          <div class="btn-group mt-2">
            <button onclick="submitAnswer()" id="nextBtn" class="game-btn bg-gray-200 text-gray-700 focus:ring-gray-400">
              è·³è¿‡æ­¤é¢˜ <i class="fa fa-arrow-right ml-1"></i>
            </button>
            <button onclick="resetProgress()" class="game-btn bg-gray-200 text-gray-700 focus:ring-gray-400 flex-1 sm:flex-none min-w-[120px]">
              <i class="fa fa-refresh mr-1"></i> é‡ç½®è¿›åº¦
            </button>
            <button onclick="exitReview()" class="game-btn bg-green-500 text-white focus:ring-green-500" style="display:none">
              <i class="fa fa-arrow-left mr-1"></i> è¿”å›é—¯å…³
            </button>
            <button onclick="nextQuestion()" id="continueBtn" class="game-btn bg-secondary text-white focus:ring-secondary" style="display:none">
              <i class="fa fa-arrow-right mr-1"></i> ç»§ç»­ä¸‹ä¸€é¢˜
            </button>
          </div>
        </div>

        <div id="similarityMeter" class="progress-bar mb-5 animate-slide-up" style="animation-delay: 0.4s; display: none">
          <div class="progress-fill bg-primary" id="similarityFill"></div>
        </div>

        <div id="options" class="space-y-2 animate-slide-up" style="animation-delay: 0.5s"></div>

        <div id="result" class="mt-4 p-4 rounded-lg text-center font-medium animate-slide-up" style="animation-delay: 0.6s"></div>

        <div id="streakReward" class="hidden reward-card mt-5">
          <h3 class="font-bold text-lg text-orange-600 mb-2">è¿ç»­æ­£ç¡®å¥–åŠ±!</h3>
          <p id="rewardMessage" class="text-gray-700 mb-3"></p>
          <div class="flex justify-center">
            <button onclick="claimReward()" class="game-btn bg-orange-500 text-white focus:ring-orange-500">
              <i class="fa fa-gift mr-1"></i> é¢†å–å¥–åŠ±
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="text-center text-gray-500 text-sm mt-6 animate-fade-in">
      <p>å•è¯æ‹¼å†™æ¸¸æˆ V3.3 Â©___åœ¨è·¯ä¸Š | ç³»ç»Ÿå­¦ä¹ è‹±è¯­è¯æ±‡</p>
    </div>
  </div>

  <audio id="bgm" autoplay loop>
    <source src="https://cdn.pixabay.com/audio/2022/10/30/audio_46fdd201cc.mp3" type="audio/mpeg">
  </audio>
  <audio id="correct-sound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_e0b6f67a53.mp3"></audio>
  <audio id="wrong-sound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_2307f9b816.mp3"></think>
  <audio id="reward-sound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_139c839a53.mp3"></think>

  <div id="streakEffect" class="streak-effect"></div>

  <script>
    const lessonWordLists = {
      "default": {
        name: "é»˜è®¤å•è¯åº“",
        lessons: [
          {
            id: 1,
            name: "ç¬¬1è¯¾ï¼šæ—¶é—´è¯æ±‡",
            words: [
              {word:"morning", definition:"æ—©æ™¨ï¼›ä¸Šåˆ", phonetic:"/ËˆmÉ”ËnÉªÅ‹/"},
              {word:"afternoon", definition:"åˆåï¼›ä¸‹åˆ", phonetic:"/ËŒÉ‘ËftÉ™ËˆnuËn/"},
              {word:"evening", definition:"æ™šä¸Šï¼›å‚æ™š", phonetic:"/ËˆiËvnÉªÅ‹/"},
              {word:"night", definition:"å¤œé—´ï¼›å¤œæ™š", phonetic:"/naÉªt/"},
              {word:"today", definition:"ä»Šå¤©", phonetic:"/tÉ™ËˆdeÉª/"},
            ]
          },
          {
            id: 2,
            name: "ç¬¬2è¯¾ï¼šæ—¥å¸¸ç”¨è¯­",
            words: [
              {word:"fine", definition:"å¥½çš„", phonetic:"/faÉªn/"},
              {word:"thank", definition:"æ„Ÿè°¢", phonetic:"/Î¸Ã¦Å‹k/"},
              {word:"goodbye", definition:"å†è§", phonetic:"/ËŒÉ¡ÊŠdËˆbaÉª/"},
              {word:"day", definition:"ä¸€å¤©", phonetic:"/deÉª/"},
              {word:"hello", definition:"ä½ å¥½", phonetic:"/hÉ™ËˆlÉ™ÊŠ/"},
            ]
          },
          {
            id: 3,
            name: "ç¬¬3è¯¾ï¼šäººç‰©ç§°å‘¼",
            words: [
              {word:"Mrs", definition:"å¤«äººï¼›å¤ªå¤ª", phonetic:"/ËˆmÉªsÉªz/"},
              {word:"Mr", definition:"å…ˆç”Ÿ", phonetic:"/ËˆmÉªstÉ™(r)/"},
              {word:"Miss", definition:"å°å§", phonetic:"/mÉªs/"},
              {word:"friend", definition:"æœ‹å‹", phonetic:"/frend/"},
              {word:"teacher", definition:"è€å¸ˆ", phonetic:"/ËˆtiËtÊƒÉ™(r)/"},
            ]
          }
        ],
        isCustom: false,
        loaded: true
      },
      "two": { name: "äºŒå¹´çº§å•è¯", lessons: [], isCustom: true, loaded: false },
      "threesh": { name: "ä¸‰å¹´çº§ä¸Šå•è¯", lessons: [], isCustom: true, loaded: false },
      "basic": { name: "æ–°æ¦‚å¿µ1è¯åº“", lessons: [], isCustom: true, loaded: false }
    };

    const puzzleQuestions = [
      { question: "â€œæ—¥å‡ºå¤§ç±³â€çŒœä¸€ä¸ªå­—ï¼Ÿ", options: ["æ˜", "æ˜Œ", "æ—©", "äº®"], answer: "æ˜Œ" },
      { question: "ä»€ä¹ˆä¸œè¥¿è¶Šæ´—è¶Šè„ï¼Ÿ", options: ["è¡£æœ", "æ‰‹", "æ°´", "åœ°æ¿"], answer: "æ°´" },
      { question: "å“ªç§ç‹—ä¸ä¼šå«ï¼Ÿ", options: ["çƒ­ç‹—", "è—ç’", "å“ˆå£«å¥‡", "ç‰§ç¾ŠçŠ¬"], answer: "çƒ­ç‹—" },
      { question: "â€œä¸€åŠ ä¸€â€çŒœä¸€ä¸ªå­—ï¼Ÿ", options: ["äºŒ", "å", "ç‹", "ä¸°"], answer: "ç‹" },
      { question: "ä»€ä¹ˆä¸œè¥¿æœ‰äº”ä¸ªå¤´ï¼Œä½†äººä¸è§‰å¾—å®ƒæ€ªï¼Ÿ", options: ["æ‰‹æŒ‡", "è›‡", "æµ·æ˜Ÿ", "çŸ³å¤´"], answer: "æ‰‹æŒ‡" },
      { question: "ä»€ä¹ˆçƒä¸èƒ½è¸¢ï¼Ÿ", options: ["è¶³çƒ", "åœ°çƒ", "ç¯®çƒ", "æ’çƒ"], answer: "åœ°çƒ" },
      { question: "â€œä¸€ç‚¹ä¸€æ¨ªé•¿ï¼Œä¸€æ’‡åˆ°å—æ´‹â€çŒœä¸€ä¸ªå­—ï¼Ÿ", options: ["å¤§", "å¤©", "å¹¿", "å‚"], answer: "å¹¿" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ™šä¸Šæ‰ä¼šé•¿å‡ºå°¾å·´ï¼Ÿ", options: ["æµæ˜Ÿ", "æœˆäº®", "å£è™", "å½±å­"], answer: "æµæ˜Ÿ" },
      { question: "ä»€ä¹ˆæ°´æœè§†åŠ›æœ€å·®ï¼Ÿ", options: ["è‹¹æœ", "é¦™è•‰", "èŠ’æœ", "è‘¡è„"], answer: "èŠ’æœ" },
      { question: "â€œä¸‰äººåŒæ—¥æ¥ï¼Œå–œè§ç™¾èŠ±å¼€â€çŒœä¸€ä¸ªå­—ï¼Ÿ", options: ["æ˜¥", "ä¼—", "æ™¶", "æ£®"], answer: "æ˜¥" },
      { question: "ä»€ä¹ˆä¸œè¥¿è¶Šç”¨è¶Šæœ‰é’±ï¼Ÿ", options: ["é’±åŒ…", "å­˜é’±ç½", "é“¶è¡Œå¡", "èšå®ç›†"], answer: "å­˜é’±ç½" },
      { question: "å“ªç§é¸¡æ²¡æœ‰ç¿…è†€ï¼Ÿ", options: ["è‚‰é¸¡", "ç”°é¸¡", "é‡é¸¡", "ç«é¸¡"], answer: "ç”°é¸¡" },
      { question: "â€œä¸€è¾¹çº¢ï¼Œä¸€è¾¹ç»¿ï¼Œä¸€è¾¹å–œé›¨ï¼Œä¸€è¾¹å–œé£â€çŒœä¸€ä¸ªå­—ï¼Ÿ", options: ["ç§‹", "æ˜", "æ™´", "åµ"], answer: "ç§‹" },
      { question: "ä»€ä¹ˆä¸œè¥¿æœ‰è…¿å´ä¸èƒ½èµ°è·¯ï¼Ÿ", options: ["æ¡Œå­", "ç‹—", "è›‡", "é±¼"], answer: "æ¡Œå­" },
      { question: "ä»€ä¹ˆä¼ä¸‹é›¨å¤©ä¸èƒ½ç”¨ï¼Ÿ", options: ["å¤ªé˜³ä¼", "é™è½ä¼", "é›¨ä¼", "æ²¹çº¸ä¼"], answer: "é™è½ä¼" },
      { question: "â€œåå­—å¯¹åå­—ï¼Œå¤ªé˜³å¯¹æœˆäº®â€çŒœä¸€ä¸ªå­—ï¼Ÿ", options: ["æœ", "èŒ", "å†’", "æ˜"], answer: "æœ" },
      { question: "ä»€ä¹ˆä¸œè¥¿è§è€…æœ‰ä»½ï¼Ÿ", options: ["é˜³å…‰", "ç¤¼ç‰©", "ç©ºæ°”", "é£æ™¯"], answer: "é˜³å…‰" },
      { question: "ä»€ä¹ˆé©¬ä¸ä¼šè·‘ï¼Ÿ", options: ["æœ¨é©¬", "æ–‘é©¬", "æ²³é©¬", "å®é©¬"], answer: "æœ¨é©¬" },
      { question: "â€œæœ‰å¿ƒèµ°ä¸å¿«ï¼Œè§æ°´è£…ä¸å®Œï¼Œé•¿è‰éš¾æ”¶æ‹¾â€çŒœä¸€ä¸ªå­—ï¼Ÿ", options: ["æ›¼", "æ…¢", "æ¼«", "è”“"], answer: "æ›¼" },
      { question: "ä»€ä¹ˆä¸œè¥¿è¶Šå‰ªè¶Šé•¿ï¼Ÿ", options: ["ç»³å­", "å¤´å‘", "å¸ƒæ–™", "æŒ‡ç”²"], answer: "å¤´å‘" },
      { question: "ä»€ä¹ˆç“œä¸èƒ½åƒï¼Ÿ", options: ["è¥¿ç“œ", "é»„ç“œ", "å‚»ç“œ", "å†¬ç“œ"], answer: "å‚»ç“œ" },
      { question: "â€œæœ‰å¤´æ— é¢ˆï¼Œæœ‰çœ¼æ— çœ‰â€çŒœä¸€ç§åŠ¨ç‰©ï¼Ÿ", options: ["é±¼", "è›‡", "é’è›™", "èš¯èš“"], answer: "é±¼" },
      { question: "ä»€ä¹ˆä¸œè¥¿èƒ½è½½ä¸‡å¨è´§ç‰©ï¼Œå´è½½ä¸åŠ¨ä¸€ç²’æ²™å­ï¼Ÿ", options: ["èˆ¹", "è½¦", "é£æœº", "æ°´"], answer: "æ°´" },
      { question: "ä»€ä¹ˆä¹¦ä½ ä¸å¯èƒ½åœ¨ä¹¦åº—ä¹°åˆ°ï¼Ÿ", options: ["æ¼«ç”»ä¹¦", "é—ä¹¦", "æ•…äº‹ä¹¦", "æ•™ç§‘ä¹¦"], answer: "é—ä¹¦" },
      { question: "â€œä¸ƒåäºŒå°æ—¶â€çŒœä¸€ä¸ªå­—ï¼Ÿ", options: ["æ™¶", "æ˜", "æ—©", "æ—­"], answer: "æ™¶" },
      { question: "ä»€ä¹ˆä¸œè¥¿å¤©æ°”è¶Šçƒ­ï¼Œå®ƒçˆ¬å¾—è¶Šé«˜ï¼Ÿ", options: ["æ¸©åº¦è®¡", "å¤ªé˜³", "æ°”çƒ", "å†°æ·‡æ·‹"], answer: "æ¸©åº¦è®¡" },
      { question: "ä»€ä¹ˆç¬”ä¸èƒ½å†™å­—ï¼Ÿ", options: ["æ¯›ç¬”", "é’¢ç¬”", "ç”µç¬”", "é“…ç¬”"], answer: "ç”µç¬”" },
      { question: "â€œä¸€åŠ ä¸€ä¸æ˜¯äºŒâ€çŒœä¸€ä¸ªå­—ï¼Ÿ", options: ["ç‹", "ä¸°", "ç”°", "ç”±"], answer: "ç‹" },
      { question: "ä»€ä¹ˆä¸œè¥¿åˆ«äººè¯·ä½ åƒï¼Œä½†ä½ è‡ªå·±è¿˜è¦ä»˜é’±ï¼Ÿ", options: ["å®˜å¸", "é¥­å±€", "é›¶é£Ÿ", "æ—©é¤"], answer: "å®˜å¸" },
      { question: "ä»€ä¹ˆç‰›ä¸åƒè‰ï¼Ÿ", options: ["æ°´ç‰›", "é»„ç‰›", "èœ—ç‰›", "å¥¶ç‰›"], answer: "èœ—ç‰›" },
      { question: "ä»€ä¹ˆä¸œè¥¿è¶Šæ“¦è¶Šé»‘ï¼Ÿ", options: ["é»‘æ¿", "é•œå­", "çš®é‹", "ç»ç’ƒ"], answer: "é»‘æ¿" },
      { question: "ä»€ä¹ˆçƒç¦»ä½ æœ€è¿‘ï¼Ÿ", options: ["è¶³çƒ", "åœ°çƒ", "çœ¼çƒ", "æ°”çƒ"], answer: "çœ¼çƒ" },
      { question: "â€œä¸€äººä¸€å¼ å£ï¼Œä¸‹é¢é•¿åªæ‰‹â€çŒœä¸€ä¸ªå­—ï¼Ÿ", options: ["æ‹¿", "åˆ", "å“ˆ", "ç­”"], answer: "æ‹¿" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ²¡è„šèµ°å¤©ä¸‹ï¼Ÿ", options: ["èˆ¹", "è›‡", "è·¯", "é‚®ç¥¨"], answer: "é‚®ç¥¨" },
      { question: "ä»€ä¹ˆä¸œè¥¿è¶Šæ´—è¶Šè„ï¼Ÿ", options: ["è¡£æœ", "æ‰‹", "æ°´", "åœ°æ¿"], answer: "æ°´" },
      { question: "å“ªç§ç‹—ä¸ä¼šå«ï¼Ÿ", options: ["çƒ­ç‹—", "è—ç’", "å“ˆå£«å¥‡", "ç‰§ç¾ŠçŠ¬"], answer: "çƒ­ç‹—" },
      { question: "ä»€ä¹ˆä¸œè¥¿æœ‰å¤´å´æ²¡æœ‰è„šï¼Ÿ", options: ["äºº", "è›‡", "åºŠ", "é±¼"], answer: "åºŠ" },
      { question: "å°æ˜ä»æ¥¼ä¸Šæ‰ä¸‹æ¥å´æ²¡å—ä¼¤ï¼Œä¸ºä»€ä¹ˆï¼Ÿ", options: ["ä»–æ˜¯æœºå™¨äºº", "ä»–æ‰çš„æ˜¯æ¥¼æ¢¯", "ä»–æ¢¦è§çš„", "ä»–å¤ªèƒ–äº†"], answer: "ä»–æ¢¦è§çš„" },
      { question: "å“ªç§æ°´æœæœ€æ€•å†·ï¼Ÿ", options: ["è¥¿ç“œ", "é¦™è•‰", "æ¢¨", "å†»æŸ¿"], answer: "å†»æŸ¿" },
      { question: "ä»€ä¹ˆåœ°æ–¹å¼€è½¦ä¸ç”¨æ‹…å¿ƒè½¦ç¥¸ï¼Ÿ", options: ["æ“åœº", "æ²™æ¼ ", "åœ°å›¾ä¸Š", "åœè½¦åœº"], answer: "åœ°å›¾ä¸Š" },
      { question: "ä»€ä¹ˆäººæœ€çˆ±è¯´è¯å´ä¸ç®—è¯ï¼Ÿ", options: ["éª—å­", "å“‘å·´", "æ¼”å‘˜", "ä¸»æŒäºº"], answer: "å“‘å·´" },
      { question: "ä»€ä¹ˆä¸œè¥¿å¯ä»¥è·‘å´æ²¡æœ‰è…¿ï¼Ÿ", options: ["è½¦", "å½±å­", "æ°´", "é£"], answer: "æ°´" },
      { question: "å°ç‹çš„çˆ¸çˆ¸æœ‰ä¸‰ä¸ªå„¿å­ï¼šå¤§å„¿å­å«å¤§æ¯›ï¼ŒäºŒå„¿å­å«äºŒæ¯›ï¼Œä¸‰å„¿å­å«ä»€ä¹ˆï¼Ÿ", options: ["å°æ¯›", "ä¸‰æ¯›", "å°ç‹", "æ¯›æ¯›"], answer: "å°ç‹" },
      { question: "å“ªç§ä¹¦æœ€ä¸é è°±ï¼Ÿ", options: ["å°è¯´", "å‚è€ƒä¹¦", "å¤©ä¹¦", "æ¼«ç”»"], answer: "å¤©ä¹¦" },
      { question: "ä»€ä¹ˆé—¨æ°¸è¿œå…³ä¸ä¸Šï¼Ÿ", options: ["è½¦é—¨", "å®¶é—¨", "é“é—¨", "çƒé—¨"], answer: "çƒé—¨" },
      { question: "ä¸ºä»€ä¹ˆç†Šå†¬çœ æ—¶ä¸æ€•å†·ï¼Ÿ", options: ["å› ä¸ºå®ƒæœ‰æ¯›", "èº²åœ¨æ´é‡Œ", "ä¸è§‰å¾—å†·", "å› ä¸ºæ˜¯åŠ¨ç”»é‡Œçš„"], answer: "ä¸è§‰å¾—å†·" },
      { question: "ä»€ä¹ˆä¸œè¥¿è¶Šæ‰”è¶Šå¤§ï¼Ÿ", options: ["çŸ³å¤´", "å½±å­", "æ°”çƒ", "çº¸"], answer: "æ°”çƒ" },
      { question: "å°æ˜çš„å¦ˆå¦ˆæœ‰ä¸‰ä¸ªå„¿å­ï¼Œå¤§å„¿å­å«å¤§æ˜ï¼ŒäºŒå„¿å­å«äºŒæ˜ï¼Œç¬¬ä¸‰ä¸ªå«ä»€ä¹ˆï¼Ÿ", options: ["ä¸‰æ˜", "å°æ˜", "æ˜æ˜", "ä¸æ˜"], answer: "å°æ˜" },
      { question: "å“ªç§é©¬ä¸èƒ½è·‘ï¼Ÿ", options: ["æœ¨é©¬", "ç§é©¬", "èµ›é©¬", "éªé©¬"], answer: "æœ¨é©¬" },
      { question: "ä¸€å¤´ç‰›4æ¡è…¿ï¼Œä¸€åªç¾Š4æ¡è…¿ï¼Œä¸‰åªç¾Šå’Œä¸€å¤´ç‰›ä¸€å…±æœ‰å¤šå°‘æ¡è…¿ï¼Ÿ", options: ["14", "16", "18", "20"], answer: "16" },
      { question: "ä»€ä¹ˆé±¼ä¸ä¼šæ¸¸æ³³ï¼Ÿ", options: ["é²¨é±¼", "é‡‘é±¼", "æ­»é±¼", "ç£é±¼"], answer: "æ­»é±¼" },
      { question: "å“ªä¸€ç§èŠ±æ°¸è¿œä¸å¼€ï¼Ÿ", options: ["ç«ç‘°", "å¤ªé˜³èŠ±", "æ­»èŠ±", "é›èŠ"], answer: "æ­»èŠ±" },
      { question: "ä¸€åªæ‰‹è¡¨æœ€å¤šæœ‰å‡ ä¸ªæŒ‡é’ˆï¼Ÿ", options: ["1ä¸ª", "2ä¸ª", "3ä¸ª", "4ä¸ª"], answer: "3ä¸ª" },
      { question: "å¤ªé˜³ä»å“ªä¸ªæ–¹å‘å‡èµ·ï¼Ÿ", options: ["å—", "åŒ—", "ä¸œ", "è¥¿"], answer: "ä¸œ" },
      { question: "é’Ÿè¡¨åœ¨èµ°åŠ¨æ—¶äººä»¬å¸¸è¯´å®ƒåœ¨â€œèµ°è·¯â€ï¼Œè¿™ç§è¯´æ³•å½¢å®¹çš„æ˜¯ï¼Ÿ", options: ["è·‘æ­¥", "è½¬åœˆ", "èµ°è·¯", "è·³èˆ"], answer: "èµ°è·¯" },
      { question: "ä»€ä¹ˆæ°´æ°¸è¿œç”¨ä¸å®Œï¼Ÿ", options: ["æ²³æ°´", "äº•æ°´", "æµ·æ°´", "æ³ªæ°´"], answer: "æµ·æ°´" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¹°çš„äººçŸ¥é“ï¼Œå–çš„äººçŸ¥é“ï¼Œåªæœ‰ç”¨çš„äººä¸çŸ¥é“ï¼Ÿ", options: ["è¯", "æ£ºæ", "çƒŸ", "é‹"], answer: "æ£ºæ" },
      { question: "å“ªä¸€ç§å­—äººäººè§äº†éƒ½ä¼šå¿µé”™ï¼Ÿ", options: ["è°œ", "éš¾", "é”™", "ä¸ä¼š"], answer: "é”™" },
      { question: "æœ‰ä¸€ç§é¸Ÿä¸ä¼šé£ï¼Œå®ƒæ˜¯ä»€ä¹ˆï¼Ÿ", options: ["ä¼é¹…", "é¸µé¸Ÿ", "é¸¡", "é¸­"], answer: "ä¼é¹…" },
      { question: "ä»€ä¹ˆæ¯å­ä¸èƒ½è£…æ°´ï¼Ÿ", options: ["èŒ¶æ¯", "é…’æ¯", "æ¸©åº¦è®¡", "å¡‘æ–™æ¯"], answer: "æ¸©åº¦è®¡" },
      { question: "ä»€ä¹ˆæ ·çš„è·¯ä¸èƒ½èµ°ï¼Ÿ", options: ["ç¡¬è·¯", "ç”°å­—è·¯", "äººè¡Œé“", "æ£‹ç›˜è·¯"], answer: "æ£‹ç›˜è·¯" },
      { question: "ä¸€ä¸ªäººè¿ç»­è·³äº†10æ¬¡ï¼Œæœ€åè¿˜ç«™åœ¨åŸåœ°ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ", options: ["ä»–åœ¨åŸåœ°è·³", "ä»–æ²¡åŠ¨", "ä»–è·³çš„æ˜¯åŸåœ°è·³", "ä»–åœ¨æ‰“è½¬"], answer: "ä»–åœ¨åŸåœ°è·³" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ‰“ç¢äº†äººä»¬ä¸ä¼šå“­ï¼Ÿ", options: ["ç»ç’ƒ", "å¿ƒ", "è›‹", "ç³–"], answer: "è›‹" },
      { question: "å“ªç§é—¨æ°¸è¿œæ‰“ä¸å¼€ï¼Ÿ", options: ["ç³–é—¨", "æœ¨é—¨", "ç”µè„‘é—¨", "è™šæ‹Ÿé—¨"], answer: "è™šæ‹Ÿé—¨" },
      { question: "æœ‰ä¸ªäººä¸€å¹´åªå·¥ä½œä¸€å¤©ï¼ŒçŒœæ˜¯å“ªä¸ªèŠ‚æ—¥ï¼Ÿ", options: ["æ˜¥èŠ‚", "å›½åº†", "æ„šäººèŠ‚", "åŠ³åŠ¨èŠ‚"], answer: "æ„šäººèŠ‚" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä½ æƒ³æ‰“ç ´å®ƒï¼Œå´ä¸èƒ½çœŸæ­£æ‰“ç ´ï¼Ÿ", options: ["é“", "ç»ç’ƒ", "æ²‰é»˜", "æ ‘æ"], answer: "æ²‰é»˜" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä»æ¥ä¸ä¼šè¯´è°ï¼Ÿ", options: ["é•œå­", "é’Ÿ", "ä¹¦", "é›¨"], answer: "é•œå­" },
      { question: "å°ææŠŠä¸€é¢—æ˜Ÿæ˜Ÿæ‘˜ä¸‹æ¥è£…è¿›å£è¢‹ï¼Œä¸ºä»€ä¹ˆï¼Ÿ", options: ["ä»–æ˜¯é­”æ³•å¸ˆ", "å¤©é»‘å‰", "åªæ˜¯æ¯”å–»", "å› ä¸ºæœ‰å¤œæ˜ç "], answer: "åªæ˜¯æ¯”å–»" },
      { question: "å“ªç§æ¯å­æ°¸è¿œä¹Ÿå–ä¸åˆ°æ°´ï¼Ÿ", options: ["èŒ¶æ¯", "å’–å•¡æ¯", "å† å†›æ¯", "å¡‘æ–™æ¯"], answer: "å† å†›æ¯" },
      { question: "ä»€ä¹ˆä¸œè¥¿è¶Šè—è¶Šå¤šï¼Ÿ", options: ["é’±", "ç§˜å¯†", "é—®é¢˜", "è°è¨€"], answer: "è°è¨€" },
      { question: "å“ªç§åŠ¨ç‰©æœ€å–œæ¬¢è‡ªæ‹ï¼Ÿ", options: ["çŒ´å­", "å¤§è±¡", "è¢‹é¼ ", "æ–‘é©¬"], answer: "çŒ´å­" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¹°çš„äººçŸ¥é“ï¼Œå–çš„äººçŸ¥é“ï¼Œç”¨çš„äººå´ä¸çŸ¥é“ï¼Ÿ", options: ["æ‰‹æœº", "æ£ºæ", "ä¹¦", "è½¦"], answer: "æ£ºæ" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ²¡äººè§è¿‡ï¼Œå´å­˜åœ¨ï¼Ÿ", options: ["å¹½çµ", "æœªæ¥", "æƒ³è±¡", "ç©ºæ°”"], answer: "æœªæ¥" },
      { question: "ä»€ä¹ˆä¸œè¥¿èƒ½è®©äººçœ‹è§åˆ«äººï¼Œå´çœ‹ä¸è§è‡ªå·±ï¼Ÿ", options: ["çœ¼ç›", "ç…§ç‰‡", "é•œå­", "å½±å­"], answer: "é•œå­" },
      { question: "å“ªç§ä¹¦æœ¬æ‰“å¼€åæ²¡æœ‰çº¸ï¼Ÿ", options: ["å°è¯´", "ç”µå­ä¹¦", "ç©ºç™½ä¹¦", "æ—¥è®°"], answer: "ç”µå­ä¹¦" },
      { question: "ä»€ä¹ˆä¸œè¥¿åˆ°äº†æ™šä¸Šæ¯”ç™½å¤©é«˜ï¼Ÿ", options: ["å½±å­", "æ¸©åº¦", "æ˜Ÿæ˜Ÿ", "æœˆäº®"], answer: "å½±å­" },
      { question: "ä»€ä¹ˆæ ·çš„æ‰‹æ°¸è¿œæŠ“ä¸åˆ°ä¸œè¥¿ï¼Ÿ", options: ["ç©ºæ‰‹", "å½±å­", "å‡æ‰‹", "å¤§æ‰‹"], answer: "å½±å­" },
      { question: "ä»€ä¹ˆä¸œè¥¿è¶Šç”¨è¶Šå¤šï¼Œè¶Šä¸ç”¨è¶Šå°‘ï¼Ÿ", options: ["é’±", "é£Ÿç‰©", "çŸ¥è¯†", "ç»éªŒ"], answer: "çŸ¥è¯†" },
      { question: "ä¸€ä¸ªäººèº«ä¸Šæœ‰å››ä¸ªè§’ï¼Œæ˜¯ä»€ä¹ˆäººï¼Ÿ", options: ["è­¦å¯Ÿ", "ç–¯å­", "å›¾çº¸ä¸Šçš„äºº", "ç”»ä¸­äºº"], answer: "å›¾çº¸ä¸Šçš„äºº" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ°¸è¿œä¸ä¼šè¢«è„šè¸¢æ‰ï¼Ÿ", options: ["è¶³çƒ", "å½±å­", "æ°”çƒ", "äº‘"], answer: "å½±å­" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¸ç®¡ç”¨å¤šä¹…éƒ½ä¸ä¼šè¿‡æœŸï¼Ÿ", options: ["ç‰›å¥¶", "æ‰‹æœº", "çŸ¥è¯†", "æ°´æœ"], answer: "çŸ¥è¯†" },
      { question: "æ¡Œå­ä¸Šæœ‰å››ä¸ªè‹¹æœï¼Œä½ æ‹¿èµ°ä¸€ä¸ªï¼Œè¿˜å‰©å‡ ä¸ªï¼Ÿ", options: ["3", "4", "5", "0"], answer: "4" },
      { question: "ä»€ä¹ˆé’¥åŒ™æ‰“ä¸å¼€é—¨ï¼Ÿ", options: ["é”åŒ™", "ç´é”®", "è½¦åŒ™", "æˆ¿åŒ™"], answer: "ç´é”®" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ€»æ˜¯åœ¨ä½ å‰é¢ï¼Œå´æ°¸è¿œçœ‹ä¸è§ï¼Ÿ", options: ["æœªæ¥", "å½±å­", "é“è·¯", "æ¢¦æƒ³"], answer: "æœªæ¥" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ”¾åœ¨å£è¢‹é‡Œï¼Œè¶Šæ‹¿è¶Šè½»ï¼Ÿ", options: ["é’±", "çŸ³å¤´", "ç©º", "ç¾½æ¯›"], answer: "ç©º" },
      { question: "æœ‰ä¸ªäººä»é£æœºä¸Šè·³ä¸‹å´æ²¡æœ‰å—ä¼¤ï¼Œä¸ºä»€ä¹ˆï¼Ÿ", options: ["ä»–å¼€ä¼äº†", "ä»–åªæ˜¯è·³æ¢¦é‡Œ", "ä»–åœ¨æ¢¦é‡Œ", "ä»–æ˜¯è¶…äºº"], answer: "ä»–åœ¨æ¢¦é‡Œ" },
      { question: "ä»€ä¹ˆä¹¦æ°¸è¿œæ²¡äººè¯»ï¼Ÿ", options: ["å°è¯´", "å°å†", "æ—¥è®°", "ä¼‘é—²ä¹¦"], answer: "å°å†" },
      { question: "ä»€ä¹ˆæ ·çš„æ¡Œå­æ°¸è¿œåœ¨è½¬ï¼Ÿ", options: ["è½¬æ¡Œ", "æ™ƒæ¡Œ", "æ‘‡æ¡Œ", "é£æ¡Œ"], answer: "è½¬æ¡Œ" },
      { question: "å“ªç§æ‰‹æœºæ°¸è¿œä¸ä¼šå“ï¼Ÿ", options: ["æ™ºèƒ½æ‰‹æœº", "æ—§æ‰‹æœº", "åæ‰‹æœº", "æ¨¡å‹æ‰‹æœº"], answer: "æ¨¡å‹æ‰‹æœº" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¸€æ—¦è¯´å‡ºå£å°±ä¼šæ¶ˆå¤±ï¼Ÿ", options: ["ç§˜å¯†", "æ²‰é»˜", "ç©ºæ°”", "ç¬‘å£°"], answer: "æ²‰é»˜" },
      { question: "ä»€ä¹ˆè½¦æ²¡æœ‰è½®å­ä¹Ÿèƒ½è·‘ï¼Ÿ", options: ["ç©å…·è½¦", "æ€ç»´è½¦", "æ¢¦ä¸­è½¦", "é£è½¦"], answer: "é£è½¦" },
      { question: "é£æœºé£è¡Œæ—¶æœ€æ€•é‡åˆ°ä»€ä¹ˆï¼Ÿ", options: ["å°é¸Ÿ", "é£", "é›·", "é›¾"], answer: "é›¾" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¸€è¯´å‡ºæ¥å°±ä¼šæ¶ˆå¤±ï¼Ÿ", options: ["ç§˜å¯†", "æ²‰é»˜", "æ—¶é—´", "å›å£°"], answer: "æ²‰é»˜" },
      { question: "ä»€ä¹ˆåŠ¨ç‰©æœ€æ“…é•¿è¡¨æ¼”ï¼Ÿ", options: ["çŒ´å­", "ç‹—", "çŒ«", "é±¼"], answer: "çŒ´å­" },
      { question: "å“ªä¸ªå­—æ°¸è¿œå†™ä¸å¯¹ï¼Ÿ", options: ["é”™", "å¯¹", "çˆ±", "å¥½"], answer: "é”™" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä½ æ˜çŸ¥é“ä¸æ˜¯çœŸçš„ï¼Œå´è¿˜å¸¸å¸¸çœ‹åˆ°ï¼Ÿ", options: ["æ¢¦", "å¹»å½±", "å½±å­", "å½±åƒ"], answer: "å¹»å½±" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ¯”å¤©è¿˜é«˜ï¼Ÿ", options: ["å±±", "äº‘", "æ¥¼", "æ¢¦æƒ³"], answer: "æ¢¦æƒ³" },
      { question: "å“ªç§é±¼æœ€ä¼šè·³èˆï¼Ÿ", options: ["è·³é±¼", "é‡‘é±¼", "æµ·é©¬", "é²¨é±¼"], answer: "è·³é±¼" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¸ä¼šæ‰æ¯›ï¼Ÿ", options: ["çŒ«", "å…”å­", "äºº", "å…‰å¤´"], answer: "å…‰å¤´" },
      { question: "å“ªä¸ªæœˆæ˜¯æ‰€æœ‰æœˆä»½ä¸­æœ€çŸ­çš„ï¼Ÿ", options: ["ä¸€æœˆ", "äºŒæœˆ", "ä¸‰æœˆ", "å››æœˆ"], answer: "äºŒæœˆ" },
      { question: "ä»€ä¹ˆä¸œè¥¿è¶Šåˆ†è¶Šå¤šï¼Ÿ", options: ["é’±", "è›‹ç³•", "æƒ…æ„Ÿ", "ç¬‘å®¹"], answer: "ç¬‘å®¹" },
      { question: "ä»€ä¹ˆåŠ¨ç‰©æœ€çˆ±é€›è¶…å¸‚ï¼Ÿ", options: ["ç‹—", "çŒ«", "ç†Š", "çŒ´å­"], answer: "ç†Š" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ°¸è¿œä¸ä¼šè¯´è¯ï¼Ÿ", options: ["ä¹¦", "å½±å­", "çŸ³å¤´", "é’Ÿè¡¨"], answer: "çŸ³å¤´" },
      { question: "æœ‰ä¸€ç§è½¦æ°¸è¿œä¸éœ€è¦åŠ æ²¹ï¼Œè¿™æ˜¯ä»€ä¹ˆè½¦ï¼Ÿ", options: ["ç”µåŠ¨è½¦", "è‡ªè¡Œè½¦", "ç©å…·è½¦", "é£è½¦"], answer: "è‡ªè¡Œè½¦" },
      { question: "å“ªç§é—¨ä»æ¥éƒ½æ‰“ä¸å¼€ï¼Ÿ", options: ["æ ¡é—¨", "æˆ¿é—¨", "å¤©é—¨", "å›´æ£‹é—¨"], answer: "å¤©é—¨" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ˜æ˜æ˜¯ç»¿è‰²çš„ï¼Œå´çœ‹ä¸è§ï¼Ÿ", options: ["æ ‘", "å¶å­", "éšå½¢ç»¿", "ä¸è§çš„ç»¿"], answer: "éšå½¢ç»¿" },
      { question: "ä»€ä¹ˆä¸œè¥¿åœ¨ä½ è§¦ç¢°æ—¶ä¼šç ´è£‚ï¼Ÿ", options: ["è›‹", "æ°”çƒ", "çº¸", "æ°´"], answer: "æ°”çƒ" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ˜¯ç”¨æ¥ç»™åˆ«äººçœ‹çš„ï¼Œå´æ°¸è¿œçœ‹ä¸è§è‡ªå·±çš„ï¼Ÿ", options: ["é•œå­", "ç…§ç‰‡", "çœ¼ç›", "ç”»"], answer: "é•œå­" },
      { question: "å“ªç§ä¹¦æ‰“å¼€åæ²¡æœ‰çº¸ï¼Ÿ", options: ["å°è¯´", "ç”µå­ä¹¦", "ç©ºç™½ä¹¦", "æ—¥è®°"], answer: "ç”µå­ä¹¦" },
      { question: "ä»€ä¹ˆä¸œè¥¿æ¯å¤©éƒ½åœ¨å¢åŠ ï¼Œä½†ç”¨çš„æ—¶å€™å´å˜å°‘ï¼Ÿ", options: ["çƒ¦æ¼", "é—®é¢˜", "å¹´é¾„", "å›å¿†"], answer: "é—®é¢˜" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¸€æ—¦å¤±å»äº†å°±å†ä¹Ÿæ‰¾ä¸å›æ¥ï¼Ÿ", options: ["æ—¶é—´", "é‡‘é’±", "é’æ˜¥", "æœºä¼š"], answer: "æ—¶é—´" },
      { question: "å“ªç§åŠ¨ç‰©å¼€ä¼šæœ€æœ‰æ•ˆç‡ï¼Ÿ", options: ["ç‹®å­", "èš‚èš", "èœœèœ‚", "ä¹Œé¾Ÿ"], answer: "èœœèœ‚" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¸åƒé¥­ä¹Ÿèƒ½æ´»ï¼Ÿ", options: ["äºº", "æ¤ç‰©", "åŠ¨ç‰©", "é±¼"], answer: "æ¤ç‰©" },
      { question: "ä»€ä¹ˆé’Ÿæ°¸è¿œä¸ä¼šè¿Ÿåˆ°ï¼Ÿ", options: ["é—¹é’Ÿ", "æ‰‹è¡¨", "æŒ‚é’Ÿ", "ç”µé’Ÿ"], answer: "é—¹é’Ÿ" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¹°äº†ä»¥åæ‰ä¼šçŸ¥é“çœŸç›¸ï¼Ÿ", options: ["æŠ½å¥–", "ä¿é™©", "è°è¨€", "è½®èƒ"], answer: "è°è¨€" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¸€æå°±è®©äººå¿˜è®°çƒ¦æ¼ï¼Ÿ", options: ["ç¬‘", "æ³ª", "æ€’", "å¿™"], answer: "ç¬‘" },
      { question: "ä»€ä¹ˆä¸œè¥¿è¶Šèº²è¶Šæ˜¾çœ¼ï¼Ÿ", options: ["ç§˜å¯†", "è°è¨€", "å½±å­", "ç¬‘å®¹"], answer: "è°è¨€" },
      { question: "ä»€ä¹ˆä¸œè¥¿ä¸€æ—¦å¤±å»å°±æ°¸è¿œå›ä¸æ¥äº†ï¼Ÿ", options: ["é‡‘é’±", "æ—¶é—´", "çˆ±æƒ…", "é’æ˜¥"], answer: "æ—¶é—´" },
      { question: "ä»€ä¹ˆä¸œè¥¿äººä»¬éƒ½ä¸å–œæ¬¢åƒï¼Ÿ", options: ["ç³–", "äº", "é¥¼å¹²", "å·§å…‹åŠ›"], answer: "äº" }
    ];

    const pronunciationVariants = {
      "morning": ["mornin", "mornning"],
      "afternoon": ["afternun", "afternooon"],
      "evening": ["evenin", "evenning"],
      "hello": ["hallo", "hellow"],
    };

    const streakRewards = {
      3: {
        description: "è·å¾—é¢å¤–æ˜Ÿæ˜Ÿï¼",
        action: () => {
          lessonStars[currentFile] = lessonStars[currentFile] || {};
          lessonStars[currentFile][currentLessonId] = Math.min((lessonStars[currentFile][currentLessonId] || 0) + 1, 3);
          return `å½“å‰è¯¾æ—¶æ˜Ÿæ˜Ÿï¼š${lessonStars[currentFile][currentLessonId]}/3 â­`;
        }
      },
      5: {
        description: "è·³è¿‡ä¸€ä¸ªå•è¯",
        action: () => {
          currentIndex++;
          return "å·²è‡ªåŠ¨è·³è¿‡ä¸‹ä¸€ä¸ªå•è¯ï¼";
        }
      }
    };

    let currentFile = "default";
    let currentLessonId = 1;
    let gameData = JSON.parse(localStorage.getItem('wordGameData')) || {
      currentIndex: 0,
      lessonStars: {},
      wrongList: {},
      puzzleQuestionsUsed: {}
    };

    let { currentIndex, lessonStars, wrongList, puzzleQuestionsUsed } = gameData;
    let inPuzzle = false;
    let isReviewMode = false;
    let currentStreak = 0;
    let currentReviewIndex = 0;
    let recognition;
    let isListening = false;
    let answerCorrect = false;
    let speechSynthAvailable = false;

    const dom = {
      instruction: document.getElementById("instruction"),
      question: document.getElementById("question"),
      result: document.getElementById("result"),
      options: document.getElementById("options"),
      definition: document.getElementById("definition"),
      phonetic: document.getElementById("phonetic"),
      letterBox: document.getElementById("letterBox"),
      stats: document.getElementById("stats"),
      nextBtn: document.getElementById("nextBtn"),
      prevBtn: document.getElementById("prevBtn"),
      startReadingBtn: document.getElementById("startReadingBtn"),
      fileNotification: document.getElementById("fileNotification"),
      similarityMeter: document.getElementById("similarityMeter"),
      similarityFill: document.getElementById("similarityFill"),
      streakReward: document.getElementById("streakReward"),
      rewardMessage: document.getElementById("rewardMessage"),
      correctSound: document.getElementById("correct-sound"),
      wrongSound: document.getElementById("wrong-sound"),
      rewardSound: document.getElementById("reward-sound"),
      readWordBtn: document.querySelector('button[onclick="readWord()"]'),
      lessonSelect: document.getElementById("lessonSelect")
    };

    function init() {
      document.getElementById("wordFileSelect").addEventListener('change', loadSelectedWordFile);
      dom.lessonSelect.addEventListener('change', changeLesson);
      loadSelectedWordFile();
      initSpeechRecognition();
      checkSpeechSynthesis();
    }

    function checkSpeechSynthesis() {
      if ('speechSynthesis' in window) {
        speechSynthAvailable = true;
        dom.readWordBtn.disabled = false;
        dom.readWordBtn.title = "";
      } else {
        speechSynthAvailable = false;
        dom.readWordBtn.disabled = true;
        dom.readWordBtn.title = "æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ";
      }
    }

    function loadSelectedWordFile() {
      const selectedFile = document.getElementById("wordFileSelect").value;
      if (selectedFile === currentFile && lessonWordLists[currentFile].loaded) return;
      
      saveCurrentProgress();
      currentFile = selectedFile;
      dom.fileNotification.textContent = "";
      
      const file = lessonWordLists[currentFile];
      
      if (file.lessons.length > 0) {
        currentLessonId = file.lessons[0].id;
        currentIndex = 0;
      }
      
      if (!wrongList[currentFile]) wrongList[currentFile] = [];
      if (!puzzleQuestionsUsed[currentFile]) puzzleQuestionsUsed[currentFile] = [];
      
      if (file.loaded) {
        updateLessonSelector();
        return;
      }
      
      dom.fileNotification.textContent = `æ­£åœ¨åŠ è½½ ${file.name}...`;
      
      const fileName = {
        "two": "two_words.txt",
        "threesh": "threeshang_words.txt",
        "basic": "basic_words.txt"
      }[currentFile];

      fetch(fileName)
        .then(response => {
          if (!response.ok) throw new Error("æ–‡ä»¶ä¸å­˜åœ¨æˆ–åŠ è½½å¤±è´¥");
          return response.text();
        })
        .then(text => {
          const lessons = parseLessonFile(text);
          
          if (lessons.length === 0) throw new Error("æœªè§£æåˆ°æœ‰æ•ˆè¯¾æ—¶ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼");
          
          lessonWordLists[currentFile].lessons = lessons;
          lessonWordLists[currentFile].loaded = true;
          dom.fileNotification.textContent = `åŠ è½½æˆåŠŸï¼å…± ${lessons.length} ä¸ªè¯¾æ—¶ï¼Œ${lessons.reduce((total, lesson) => total + lesson.words.length, 0)} ä¸ªå•è¯`;
          
          document.querySelector('#statsInfo span:first-of-type').textContent = `æ€»è¯¾æ—¶ï¼š${lessons.length}`;
          document.querySelector('#statsInfo span:last-of-type').textContent = `æ€»å•è¯ï¼š${lessons.reduce((total, lesson) => total + lesson.words.length, 0)}`;
          
          updateLessonSelector();
        })
        .catch(error => {
          dom.fileNotification.textContent = `åŠ è½½å¤±è´¥ï¼š${error.message}`;
          console.error("è¯åº“åŠ è½½é”™è¯¯ï¼š", error);
        });
    }

    function parseLessonFile(text) {
      const lessons = [];
      let currentLesson = { id: 1, name: "ç¬¬1è¯¾", words: [] };
      let currentLessonId = 1;
      let currentLessonName = `ç¬¬${currentLessonId}è¯¾`;

      const lines = text.split('\n')
        .map(line => line.trim())
        .filter(line => line && !line.startsWith('//'));

      lines.forEach(line => {
        const lessonMatch = line.match(/Lesson\s*(\d+)\s*:?\s*(.*)/i);
        if (lessonMatch) {
          if (currentLesson.words.length > 0) lessons.push(currentLesson);
          currentLessonId = parseInt(lessonMatch[1]);
          currentLessonName = lessonMatch[2] ? lessonMatch[2] : `ç¬¬${currentLessonId}è¯¾`;
          currentLesson = { id: currentLessonId, name: currentLessonName, words: [] };
        } else {
          const parts = line.split(',').map(p => p.trim());
          if (parts.length >= 2) {
            const wordIndex = parts[0].match(/^\d+$/) ? 1 : 0;
            if (wordIndex < parts.length) {
              currentLesson.words.push({
                word: parts[wordIndex],
                definition: parts[wordIndex + 1],
                phonetic: parts[wordIndex + 2] || 'æ— '
              });
            }
          }
        }
      });

      if (currentLesson.words.length > 0) lessons.push(currentLesson);
      return lessons;
    }

    function updateLessonSelector() {
      const file = lessonWordLists[currentFile];
      const lessonSelect = dom.lessonSelect;
      
      lessonSelect.innerHTML = "";
      
      file.lessons.forEach(lesson => {
        const option = document.createElement("option");
        option.value = lesson.id;
        option.textContent = `${lesson.name} (${lesson.words.length}ä¸ªå•è¯)`;
        lessonSelect.appendChild(option);
      });
      
      const hasCurrentLesson = file.lessons.some(lesson => lesson.id === currentLessonId);
      if (!hasCurrentLesson && file.lessons.length > 0) {
        currentLessonId = file.lessons[0].id;
        currentIndex = 0;
      }
      
      lessonSelect.value = currentLessonId;
      loadCurrentLesson();
    }

    function changeLesson() {
      const selectedLessonId = parseInt(dom.lessonSelect.value);
      if (selectedLessonId === currentLessonId) return;
      
      saveCurrentProgress();
      currentLessonId = selectedLessonId;
      currentIndex = 0;
      loadCurrentLesson();
    }

    function updateStats() {
      const file = lessonWordLists[currentFile];
      const lesson = getCurrentLesson();
      
      wrongList[currentFile] = wrongList[currentFile] || [];
      
      dom.stats.innerHTML = `
        <div><i class="fa fa-check-circle text-green-500 mr-1"></i> æ­£ç¡®ï¼š<b>${getCorrectCount()}</b></div>
        <div><i class="fa fa-times-circle text-red-500 mr-1"></i> é”™è¯¯ï¼š<b>${wrongList[currentFile].length}</b></div>
        <div><i class="fa fa-book text-primary mr-1"></i> è¿›åº¦ï¼š<b>${currentIndex + 1}/${lesson.words.length}</b></div>
      `;
    }

    function getCorrectCount() {
      const lesson = getCurrentLesson();
      const lessonWords = lesson.words.map(word => word.word.toLowerCase());
      const wrongWords = (wrongList[currentFile] || []).map(word => word.word.toLowerCase());
      
      return Math.min(currentIndex, lesson.words.length) - 
             lessonWords.slice(0, currentIndex).filter(word => wrongWords.includes(word)).length;
    }

    function getCurrentLesson() {
      return lessonWordLists[currentFile].lessons.find(lesson => lesson.id === currentLessonId) || 
             lessonWordLists[currentFile].lessons[0];
    }

    function loadCurrentLesson() {
      dom.question.textContent = "";
      dom.result.textContent = "";
      dom.options.innerHTML = "";
      dom.letterBox.innerHTML = "";
      dom.similarityMeter.style.display = "none";
      dom.streakReward.classList.add("hidden");
      dom.nextBtn.style.display = "inline-block";
      document.getElementById("continueBtn").style.display = "none";
      answerCorrect = false;
      
      const file = lessonWordLists[currentFile];
      if (!file.loaded || file.lessons.length === 0) {
        dom.instruction.textContent = "è¯·å…ˆé€‰æ‹©æœ‰æ•ˆçš„å•è¯åº“å’Œè¯¾æ—¶";
        dom.definition.textContent = "";
        dom.phonetic.textContent = "";
        return;
      }
      
      const lesson = getCurrentLesson();
      if (!lesson) {
        dom.instruction.textContent = "æœªæ‰¾åˆ°æŒ‡å®šè¯¾æ—¶";
        dom.definition.textContent = "";
        dom.phonetic.textContent = "";
        return;
      }
      
      if (isReviewMode) {
        document.querySelector('button[onclick="exitReview()"]').style.display = "inline-block";
        const fileWrongList = wrongList[currentFile] || [];
        
        if (fileWrongList.length === 0) {
          dom.instruction.textContent = "ğŸ‰ æ­å–œä½ æ”»å…‹äº†æ‰€æœ‰é”™é¢˜ï¼";
          dom.definition.textContent = "ç»§ç»­åŠ æ²¹å“¦ï¼";
          dom.phonetic.textContent = "";
          dom.nextBtn.style.display = "none";
          dom.prevBtn.style.display = "none";
          return;
        }
        
        currentReviewIndex = Math.min(currentReviewIndex, fileWrongList.length - 1);
        const wordObj = fileWrongList[currentReviewIndex];
        dom.instruction.innerHTML = `<span class="level-badge">é”™é¢˜å›é¡¾</span> ç¬¬ ${currentReviewIndex + 1}/${fileWrongList.length} é¢˜`;
        dom.definition.textContent = `ä¸­æ–‡æç¤ºï¼š${wordObj.definition}`;
        dom.phonetic.textContent = `éŸ³æ ‡ï¼š${wordObj.phonetic || 'æ— '}`;
        generateInputBoxes(wordObj);
        return;
      }
      
      document.querySelector('button[onclick="exitReview()"]').style.display = "none";
      
      if (currentIndex >= lesson.words.length && !inPuzzle) {
        showPuzzle("lesson");
        return;
      }
      
      const wordObj = lesson.words[currentIndex];
      dom.instruction.innerHTML = `<span class="level-badge">${lesson.name}</span> ç¬¬ ${currentIndex + 1}/${lesson.words.length} è¯`;
      dom.definition.textContent = `ä¸­æ–‡æç¤ºï¼š${wordObj.definition}`;
      dom.phonetic.textContent = `éŸ³æ ‡ï¼š${wordObj.phonetic || 'æ— '}`;
      generateInputBoxes(wordObj);
      
      if (speechSynthAvailable) {
        setTimeout(readWord, 500);
      }
      
      updateStats();
      
      dom.nextBtn.textContent = isReviewMode ? "ä¸‹ä¸€ä¸ªé”™é¢˜" : "è·³è¿‡æ­¤é¢˜";
      dom.prevBtn.disabled = isReviewMode ? currentReviewIndex <= 0 : currentIndex <= 0;
    }

    function generateInputBoxes(wordObj) {
      dom.letterBox.innerHTML = "";
      
      for (let i = 0; i < wordObj.word.length; i++) {
        const input = document.createElement("input");
        input.type = "text";
        input.maxLength = 1;
        input.className = "word-input";
        input.dataset.index = i;
        input.addEventListener('input', function() {
          if (this.value) this.value = this.value.toLowerCase();
        });
        addInputListeners(input);
        dom.letterBox.appendChild(input);
      }
      
      dom.letterBox.querySelector("input")?.focus();
    }

    function addInputListeners(input) {
      input.addEventListener('input', function() {
        if (this.value) {
          const next = this.nextElementSibling;
          if (next?.tagName === "INPUT") next.focus();
          else checkAnswer();
        }
      });

      input.addEventListener('keydown', function(e) {
        if (e.key === 'Backspace' && !this.value) {
          const prev = this.previousElementSibling;
          if (prev?.tagName === "INPUT") prev.focus();
        }
      });
    }

    function checkAnswer() {
      const wordObj = isReviewMode 
        ? (wrongList[currentFile] || [])[currentReviewIndex]
        : getCurrentLesson().words[currentIndex];
      
      if (!wordObj) return;
      
      const inputs = dom.letterBox.querySelectorAll("input");
      let userAnswer = "";
      inputs.forEach(input => userAnswer += (input.value || '').toLowerCase());

      if (userAnswer.length !== wordObj.word.length) return;

      dom.similarityMeter.style.display = "block";
      const similarity = calculateSimilarity(userAnswer, wordObj.word.toLowerCase());
      dom.similarityFill.style.width = `${similarity * 100}%`;

      const isCorrect = userAnswer === wordObj.word.toLowerCase() || 
        (pronunciationVariants[wordObj.word.toLowerCase()]?.includes(userAnswer) ?? false);

      inputs.forEach((input, i) => {
        const correctChar = wordObj.word[i].toLowerCase();
        input.className = `word-input ${input.value.toLowerCase() === correctChar ? 'correct' : 'wrong'}`;
      });

      if (isCorrect) {
        dom.result.className = "mt-4 p-4 rounded-lg bg-green-100 text-green-800";
        dom.result.textContent = `ğŸ‰ æ­£ç¡®ï¼å•è¯ï¼š${wordObj.word}`;
        dom.correctSound.play();
        answerCorrect = true;
        document.getElementById("continueBtn").style.display = "inline-block";
        dom.nextBtn.style.display = "none";
        currentStreak++;
        
        if (currentStreak === 5 && !inPuzzle) {
          window.streakPuzzleIndex = currentIndex;
          showPuzzle("streak");
          currentStreak = 0;
        }
        
        setTimeout(() => {
          dom.result.textContent += " è¯·æœ—è¯»å•è¯ä»¥ç»§ç»­ä¸‹ä¸€é¢˜";
          dom.startReadingBtn.focus();
        }, 500);
        
        if (streakRewards[currentStreak]) {
          showReward(currentStreak);
        }
      } else {
        dom.result.className = "mt-4 p-4 rounded-lg bg-red-100 text-red-800";
        dom.result.textContent = `âŒ é”™è¯¯ï¼æ­£ç¡®å•è¯ï¼š${wordObj.word}`;
        dom.wrongSound.play();
        currentStreak = 0;
        
        wrongList[currentFile] = wrongList[currentFile] || [];
        if (!wrongList[currentFile].some(w => w.word.toLowerCase() === wordObj.word.toLowerCase())) {
          wrongList[currentFile].push(wordObj);
        }

        setTimeout(() => {
          const inputs = dom.letterBox.querySelectorAll("input");
          inputs.forEach((input, i) => {
            const correctChar = wordObj.word[i].toLowerCase();
            if (input.value.toLowerCase() !== correctChar) input.classList.add('highlight');
          });
          
          setTimeout(() => {
            inputs.forEach(input => {
              input.value = '';
              input.className = 'word-input';
              input.classList.remove('highlight');
            });
            dom.letterBox.querySelector("input")?.focus();
          }, 1000);
        }, 500);
      }
      
      saveCurrentProgress();
      updateStats();
    }

    function showStreakEffect() {
      const streakEl = document.getElementById("streakEffect");
      streakEl.textContent = `+${currentStreak} è¿å‡»ï¼`;
      streakEl.style.display = "block";
      setTimeout(() => streakEl.style.display = "none", 1000);
    }

    function nextQuestion() {
      saveCurrentProgress();
      
      if (!inPuzzle) currentStreak = 0;
      
      if (isReviewMode) {
        currentReviewIndex++;
        loadCurrentLesson();
        return;
      }
      
      currentIndex++;
      
      const lesson = getCurrentLesson();
      if (currentIndex >= lesson.words.length && !inPuzzle) {
        showPuzzle("lesson");
      } else {
        loadCurrentLesson();
      }
    }

    function prevQuestion() {
      currentStreak = 0;
      
      if (isReviewMode) {
        if (currentReviewIndex > 0) currentReviewIndex--;
      } else if (currentIndex > 0) {
        currentIndex--;
      }
      
      loadCurrentLesson();
    }

    function submitAnswer() {
      if (isReviewMode) {
        currentReviewIndex++;
        loadCurrentLesson();
        return;
      }

      if (inPuzzle) {
        const lessons = lessonWordLists[currentFile].lessons;
        const currentLessonIndex = lessons.findIndex(lesson => lesson.id === currentLessonId);
        
        if (currentLessonIndex + 1 < lessons.length) {
          currentLessonId = lessons[currentLessonIndex + 1].id;
        } else {
          currentLessonId = lessons[0].id;
        }
        
        currentIndex = 0;
        inPuzzle = false;
        saveCurrentProgress();
        loadCurrentLesson();
        return;
      }

      const lesson = getCurrentLesson();
      const currentWord = lesson.words[currentIndex];
      
      wrongList[currentFile] = wrongList[currentFile] || [];
      if (!wrongList[currentFile].some(w => w.word.toLowerCase() === currentWord.word.toLowerCase())) {
        wrongList[currentFile].push(currentWord);
      }
      
      currentStreak = 0;
      currentIndex++;
      saveCurrentProgress();
      loadCurrentLesson();
    }

    function showPuzzle(source = "lesson") {
      inPuzzle = true;
      const lesson = getCurrentLesson();
      
      puzzleQuestionsUsed[currentFile] = puzzleQuestionsUsed[currentFile] || [];
      
      let availablePuzzles = puzzleQuestions.filter((_, index) => 
        !puzzleQuestionsUsed[currentFile].includes(index)
      );
      
      if (availablePuzzles.length === 0) {
        availablePuzzles = puzzleQuestions;
        puzzleQuestionsUsed[currentFile] = [];
      }
      
      const puzzleIndex = Math.floor(Math.random() * availablePuzzles.length);
      const puzzle = availablePuzzles[puzzleIndex];
      puzzleQuestionsUsed[currentFile].push(puzzleQuestions.indexOf(puzzle));

      const instructionText = source === "lesson" 
        ? `<span class="level-badge">${lesson.name} å®ŒæˆæŒ‘æˆ˜</span> æ­å–œå®Œæˆæœ¬è¯¾æ—¶ï¼Œæ¥æŒ‘æˆ˜ä¸€ä¸ªå°è°œé¢˜å§ï¼`
        : `<span class="level-badge">è¿ç»­ç­”å¯¹å¥–åŠ±</span> å¤ªæ£’äº†ï¼è¿ç»­ç­”å¯¹5é¢˜ï¼ŒæŒ‘æˆ˜ä¸€ä¸ªå°è°œé¢˜å§ï¼`;
      dom.instruction.innerHTML = instructionText;
      
      dom.question.textContent = puzzle.question;
      dom.definition.textContent = "è¯·é€‰æ‹©æ­£ç¡®ç­”æ¡ˆï¼š";
      dom.phonetic.textContent = "";
      dom.letterBox.innerHTML = "";

      puzzle.options.forEach(option => {
        const btn = document.createElement("button");
        btn.className = "game-btn bg-gray-200 text-gray-700 w-full text-left mb-2";
        btn.textContent = option;
        btn.onclick = () => checkPuzzleAnswer(puzzle, option, source);
        dom.options.appendChild(btn);
      });
    }

    function checkPuzzleAnswer(puzzle, selected, source) {
      const buttons = dom.options.querySelectorAll("button");
      buttons.forEach(btn => {
        btn.disabled = true;
        if (btn.textContent === puzzle.answer) {
          btn.className = "game-btn bg-green-500 text-white w-full text-left mb-2";
        } else if (btn.textContent === selected) {
          btn.className = "game-btn bg-red-500 text-white w-full text-left mb-2";
        }
      });

      if (selected === puzzle.answer) {
        dom.result.className = "mt-4 p-4 rounded-lg bg-green-100 text-green-800";
        dom.result.textContent = "ğŸ‰ æ­å–œä½ ç­”å¯¹äº†ï¼è·å¾—é¢å¤–æ˜Ÿæ˜Ÿï¼";
        dom.correctSound.play();
        
        lessonStars[currentFile] = lessonStars[currentFile] || {};
        lessonStars[currentFile][currentLessonId] = Math.min((lessonStars[currentFile][currentLessonId] || 0) + 1, 3);
      } else {
        dom.result.className = "mt-4 p-4 rounded-lg bg-red-100 text-red-800";
        dom.result.textContent = `âŒ æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${puzzle.answer}`;
        dom.wrongSound.play();
      }

      saveCurrentProgress();
      
      setTimeout(() => {
        inPuzzle = false;
        dom.options.innerHTML = "";
        
        if (source === "lesson") {
          const lessons = lessonWordLists[currentFile].lessons;
          const currentLessonIndex = lessons.findIndex(lesson => lesson.id === currentLessonId);
          
          if (currentLessonIndex + 1 < lessons.length) {
            currentLessonId = lessons[currentLessonIndex + 1].id;
          } else {
            currentLessonId = lessons[0].id;
          }
          currentIndex = 0;
          dom.lessonSelect.value = currentLessonId;
        } else {
          currentIndex = window.streakPuzzleIndex + 1;
        }
        
        loadCurrentLesson();
      }, 2000);
    }

    function initSpeechRecognition() {
      if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
        dom.startReadingBtn.disabled = true;
        dom.startReadingBtn.title = "ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«";
        return;
      }

      recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = 'en-US';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript.toLowerCase();
        
        const currentWord = isReviewMode 
          ? (wrongList[currentFile] || [])[currentReviewIndex].word.toLowerCase()
          : getCurrentLesson().words[currentIndex].word.toLowerCase();
        
        const variants = [currentWord, ...(pronunciationVariants[currentWord] || [])];
        const isMatch = variants.some(variant => 
          transcript.includes(variant) || variant.includes(transcript)
        );

        if (isMatch) {
          if (answerCorrect) {
            dom.result.textContent = `ğŸ‰ è¯­éŸ³è¯†åˆ«æˆåŠŸï¼å•è¯ï¼š${currentWord}`;
            setTimeout(() => {
              if (isReviewMode) {
                wrongList[currentFile] = (wrongList[currentFile] || []).filter(
                  w => w.word.toLowerCase() !== currentWord
                );
              }
              
              nextQuestion();
            }, 1000);
          } else {
            dom.result.textContent = `è¯­éŸ³è¯†åˆ«ï¼š${transcript}ï¼Œè¯·å…ˆæ­£ç¡®æ‹¼å†™å•è¯`;
          }
        } else {
          dom.result.textContent = `æœªèƒ½è¯†åˆ«ï¼š"${transcript}"ï¼Œè¯·å°è¯•å†æ¬¡æœ—è¯» "${currentWord}"`;
        }
      };

      recognition.onend = () => {
        isListening = false;
        dom.startReadingBtn.textContent = "å¼€å§‹æœ—è¯»";
        dom.startReadingBtn.classList.remove("listening");
      };
    }

    function toggleListening() {
      if (!recognition) return;
      
      if (isListening) {
        recognition.stop();
        isListening = false;
        dom.startReadingBtn.textContent = "å¼€å§‹æœ—è¯»";
        dom.startReadingBtn.classList.remove("listening");
      } else {
        recognition.start();
        isListening = true;
        dom.startReadingBtn.textContent = "æ­£åœ¨è†å¬...";
        dom.startReadingBtn.classList.add("listening");
        dom.result.textContent = "è¯·æœ—è¯»å•è¯...";
      }
    }

    function saveCurrentProgress() {
      gameData = { ...gameData, currentIndex, lessonStars, wrongList, puzzleQuestionsUsed };
      localStorage.setItem('wordGameData', JSON.stringify(gameData));
    }

    function showReward(streak) {
      const reward = streakRewards[streak];
      dom.rewardMessage.innerHTML = `${reward.description}<br>${reward.action()}`;
      dom.streakReward.classList.remove("hidden");
      dom.rewardSound.play();
      showStreakEffect();
    }

    function claimReward() {
      dom.streakReward.classList.add("hidden");
      nextQuestion();
    }

    function showMistakes() {
      isReviewMode = true;
      currentReviewIndex = 0;
      loadCurrentLesson();
    }

    function exitReview() {
      isReviewMode = false;
      loadCurrentLesson();
    }

    function resetProgress() {
      if (confirm(`ç¡®å®šè¦é‡ç½®"${lessonWordLists[currentFile].name}"çš„æ‰€æœ‰è¿›åº¦å—ï¼Ÿ`)) {
        lessonStars = {...lessonStars};
        delete lessonStars[currentFile];
        
        wrongList = {...wrongList};
        wrongList[currentFile] = [];
        
        puzzleQuestionsUsed = {...puzzleQuestionsUsed};
        puzzleQuestionsUsed[currentFile] = [];
        
        currentIndex = 0;
        currentStreak = 0;
        answerCorrect = false;
        inPuzzle = false;
        isReviewMode = false;
        currentReviewIndex = 0;
        
        const file = lessonWordLists[currentFile];
        if (file.lessons.length > 0) {
          currentLessonId = file.lessons[0].id;
        }
        
        gameData = {
          ...gameData,
          currentIndex,
          lessonStars,
          wrongList,
          puzzleQuestionsUsed,
          currentLessonId
        };
        localStorage.removeItem('wordGameData');
        localStorage.setItem('wordGameData', JSON.stringify(gameData));
        
        document.getElementById("lessonSelect").value = currentLessonId;
        loadCurrentLesson();
        updateStats();
        
        const inputs = dom.letterBox.querySelectorAll("input");
        inputs.forEach(input => {
          input.value = '';
          input.className = 'word-input';
        });
        dom.letterBox.querySelector("input")?.focus();
        
        dom.result.className = "mt-4 p-4 rounded-lg bg-blue-100 text-blue-800";
        dom.result.textContent = "âœ… è¿›åº¦å·²é‡ç½®ï¼Œä»ç¬¬ä¸€è¯¾æ—¶å¼€å§‹å§ï¼";
      }
    }

    function readWord() {
      if (!speechSynthAvailable) return;
      
      window.speechSynthesis.cancel();
      
      const currentWord = isReviewMode 
        ? (wrongList[currentFile] || [])[currentReviewIndex].word
        : getCurrentLesson().words[currentIndex].word;
      
      const utterance = new SpeechSynthesisUtterance(currentWord);
      utterance.lang = 'en-US';
      utterance.rate = 0.9;
      
      utterance.onend = () => console.log(`æœ—è¯»å®Œæˆ: ${currentWord}`);
      
      utterance.onerror = (event) => {
        console.error(`è¯­éŸ³åˆæˆé”™è¯¯: ${event.error}`);
        dom.result.textContent = "è¯­éŸ³åˆæˆå‡ºé”™ï¼Œè¯·ç¨åå†è¯•";
      };
      
      window.speechSynthesis.speak(utterance);
    }

    function calculateSimilarity(s1, s2) {
      if (s1 === s2) return 1;
      const longer = s1.length > s2.length ? s1 : s2;
      const shorter = s1.length > s2.length ? s2 : s1;
      const longerLen = longer.length;
      if (longerLen === 0) return 1.0;
      
      return (longerLen - editDistance(longer, shorter)) / parseFloat(longerLen);
    }

    function editDistance(s1, s2) {
      s1 = s1.toLowerCase();
      s2 = s2.toLowerCase();
      
      const costs = [];
      for (let i = 0; i <= s1.length; i++) {
        let lastValue = i;
        for (let j = 0; j <= s2.length; j++) {
          if (i === 0) costs[j] = j;
          else {
            if (j > 0) {
              let newValue = costs[j - 1];
              if (s1.charAt(i - 1) !== s2.charAt(j - 1))
                newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
              costs[j - 1] = lastValue;
              lastValue = newValue;
            }
          }
        }
        if (i > 0) costs[s2.length] = lastValue;
      }
      return costs[s2.length];
    }

    window.onload = init;
  </script>
</body>
</html>
